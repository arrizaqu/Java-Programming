# Spring Security 4

## Dependency 
```
<dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-security</artifactId>
    </dependency>
<dependency>
  <groupId>org.springframework.security</groupId>
  <artifactId>spring-security-test</artifactId>
  <scope>test</scope>
</dependency>
```

## SecurityConfig
```
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Autowired
	private CustomeUserDetailService customeUserDetailService;

	@Bean
	public DaoAuthenticationProvider authenticationProvider() {
		DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();
		authProvider.setUserDetailsService(customeUserDetailService);
		authProvider.setPasswordEncoder(bCryptPasswordEncoder());
		return authProvider;
	}
	
	@Bean
	public BCryptPasswordEncoder bCryptPasswordEncoder() {
		return new BCryptPasswordEncoder();

	}
	
	@Bean
	public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{
		
		httpSecurity.authorizeHttpRequests((authorize) -> 
					authorize
					.requestMatchers("/login_v1/**").permitAll()
					.anyRequest().authenticated()
					).formLogin(
                            form -> form
                                    .loginPage("/login")
                                    //.loginProcessingUrl("/login")
                                    //.defaultSuccessUrl("/")
                                    .permitAll()
                    )
					.logout(
                            logout -> logout
                                    .logoutRequestMatcher(new AntPathRequestMatcher("/logout"))
                                    .permitAll()
                    );

            return httpSecurity.build();
	}

}
```
